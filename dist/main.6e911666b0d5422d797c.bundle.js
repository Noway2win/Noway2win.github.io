(()=>{"use strict";const e="AAAAAAAAAAAAAAAAAAAAAAyPSgEAAAAAlep6WuK3Tt48O0UIIsjBd6idDqw%3DAzX3BfwSqBrX8DE4j4UTxTeD1iuC5sqjQjjPHs7Hlfl3fLxfMJ";!function(t,s){const n=document.querySelector(t),a=document.querySelector(s);n.addEventListener("submit",(async t=>{t.preventDefault();try{!function(e,t){const s=document.querySelector(".channels-list"),n=document.createElement("div"),a=function(e,t){const s=document.createElement("section"),n=document.createElement("img"),a=document.createElement("a"),i=document.createElement("button");return s.append(n),s.append(a),s.append(i),s.classList.add("channels-list-item_short"),a.classList.add("channels-list-item_name"),i.classList.add("channels-list-item_delete-button"),n.classList.add("channels-list-item_short__image"),n.src=e,a.innerText=t,i.innerText="🗑️",i.addEventListener("click",(function(){this.parentNode.parentNode.remove()})),s}(e.profile_image_url,e.name),i=function(e){const t=document.createElement("section"),s=document.createElement("p"),n=document.createElement("p"),a=document.createElement("p");return s.classList.add("channels-list-item_detailed__info-p"),n.classList.add("channels-list-item_detailed__info-p"),a.classList.add("channels-list-item_detailed__info-p"),s.append(`Description: ${e.description}`),n.append(`Number of followers: ${e.public_metrics.followers_count}`),a.append(`Number of tweets: ${e.public_metrics.tweet_count}`),t.append(s),t.append(n),t.append(a),t.classList.add("hidden","channels-list-item_detailed"),t}(e),c=function(e){const t=document.createElement("section");return t.classList.add("tweets-list","hidden"),e.forEach((e=>{const s=document.createElement("div"),n=document.createElement("p");if(s.classList.add("tweets-list-item"),n.classList.add("tweets-list-item_text"),n.innerText=e.text,s.append(n),"imgUrl"in e){const t=document.createElement("img");t.classList.add("tweets-list-item_img"),t.src=e.imgUrl,s.append(t)}t.append(s)})),t}(t);s.append(c),n.append(a),n.append(i),n.classList.add("channels-list-item"),s.prepend(n),a.addEventListener("click",(()=>{i.classList.toggle("hidden")})),i.addEventListener("click",(()=>{c.classList.remove("hidden")})),document.body.addEventListener("click",(e=>{e.target==c||c.contains(e.target)||e.target==i||i.contains(e.target)||c.classList.add("hidden")}))}(await(e,n=a.value,new Promise(((e,t)=>{let s=new XMLHttpRequest;s.open("GET",`https://cors-anywhere.herokuapp.com/https://api.twitter.com/2/users/by?usernames=${n}&user.fields=description,name,profile_image_url,username,public_metrics`),s.setRequestHeader("Authorization","Bearer AAAAAAAAAAAAAAAAAAAAAAyPSgEAAAAAlep6WuK3Tt48O0UIIsjBd6idDqw%3DAzX3BfwSqBrX8DE4j4UTxTeD1iuC5sqjQjjPHs7Hlfl3fLxfMJ"),s.send(),s.onload=function(){if(200!=s.status)t({code:s.status,status:s.statusText});else{const t=JSON.parse(s.responseText).data[0];e(t)}},s.onerror=function(){t({code:s.status,status:s.statusText})}}))),await(s=a.value,new Promise(((e,t)=>{let n=new XMLHttpRequest;n.open("GET",`https://cors-anywhere.herokuapp.com/https://api.twitter.com/2/tweets/search/recent?query=from:${s}&expansions=attachments.media_keys&media.fields=url`),n.setRequestHeader("Authorization","Bearer AAAAAAAAAAAAAAAAAAAAAAyPSgEAAAAAlep6WuK3Tt48O0UIIsjBd6idDqw%3DAzX3BfwSqBrX8DE4j4UTxTeD1iuC5sqjQjjPHs7Hlfl3fLxfMJ"),n.send(),n.onload=function(){if(200!=n.status)t({code:n.status,status:n.statusText});else{const t=JSON.parse(n.responseText),i=(s=t.data,a=t?.includes?.media,s.forEach((e=>{a.forEach((t=>{e.attachments?.media_keys.includes(t.media_key)&&(e.imgUrl=t.url)}))})),s);e(i)}var s,a},n.onerror=function(){t({code:n.status,status:n.statusText})}}))))}catch(e){console.log(e)}finally{a.value=""}var s,n}))}(".search-pannel__form","#search-pannel__form__input")})();